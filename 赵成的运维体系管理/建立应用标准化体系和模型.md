# 标准化体系建设：建立应用标准化体系和模型

<aside>
💡 标准先行！于纷繁复杂中抽象出标准规范的东西，是我们后续一系列自动化和稳定性保障的基础。

</aside>

## 为什么要做标准化？

我们运维工作的开展常常不知从何下手，或者上来就冲着工具和自动化去了，却始终不得章法，工具做了一堆，效率却并没有提升。其实绝大多数情况下，问题和原因就是标准化这个基础工作没做扎实。

### 标准化的过程实际上就是对运维对象的识别和建模过程

1. 形成统一对象模型
2. 在统一认识下开展有效协作
3. 针对不同运维对象抽取对应的运维场景
4. 运维场景的自动化实现

### 标准化的过程中，先识别出各个运维对象，针对操作对象进行运维工作

比如我们说扩容，那就要先确定这里到底是服务器的扩容，还是应用的扩容，还是其它对象的扩容。

如果把服务器的扩容套用到应用的扩容上去，必然会导致流程错乱。

同时对于对象理解上的不一致，也会徒增无谓的沟通成本，造成效率低下。

**于纷繁复杂中抽象出标准规范的东西，是我们后续一系列自动化和稳定性保障的基础**

### 总结一下标准化的套路：

1. **识别对象**
2. **识别对象属性**
3. **识别对象关系**
4. **识别对象场景**

接下来我们就按照上面这个思路，一起来分析从基础设施层面和应用层面应该识别出哪些运维对象。

## 基础设施层面的标准化

### 第一步，识别实体对象

主要有服务器、网络、IDC、机柜、存储、配件等。

### 第二步，识别对象的属性

比如服务器就会有 SN 序列号、IP 地址、厂商、硬件配置（如 CPU、内存、硬盘、网卡、PCIE、BIOS）、维保信息等；

网络设备如交换机也会有厂商、型号、带宽等信息。

### 第三步，识别对象之间的关联关系

比如服务器所在的机柜，虚拟机所在的宿主机、机柜所在 IDC 等简单关系；

复杂一点就会有核心交换机、汇聚交换机、接入交换机以及机柜和服务器之间的级联关系等，这些相对复杂一些，也就是我们常说的**网络拓扑关系**。

把以上信息梳理清楚，通过 ER 建模工具进行数据建模，再将以上的信息固化到 DB 中，一个资源层面的信息管理平台就基本成型了。

![https://docimg9.docs.qq.com/image/uWN7oR9qNkiCL5xkum3nig.png?w=694&h=399](https://docimg9.docs.qq.com/image/uWN7oR9qNkiCL5xkum3nig.png?w=694&h=399)

### 第四步，识别出运维场景是什么

信息固化不是目的，也没有价值，只有信息动态流转起来才有价值。接下来我们需要做的事情，就是识别出针对运维对象所实施的日常运维操作有哪些。

还是以服务器为例，我们针对服务器的日常操作有采购、入库、安装、配置、上线、下线、维修等等。

另外，可能还会有可视化和查询的场景，如拓扑关系的可视化和动态展示，交换机与服务器之间的级联关系、状态（正常 or 故障）的展示等，这样可以很直观地关注到资源节点的状态。

成了这些工作，接下来才是对上述运维场景的自动化开发。所以你看，在真正执行去做工具和自动化平台之前，其实是需要先做好大量的基础准备工作的。

## 应用层面的标准化

### 第一步，识别对象

这个识别过程是在做微服务架构设计或拆分的时候就确定下来的。

所以严格地讲，它不应该是运维阶段才被识别出来的，而是在之前设计阶段就被识别和确认下来，然后延伸到运维这里才对。

### 第二步，识别对象属性

应用是业务的抽象逻辑，所以会有业务和运维两个维度的属性。

业务属性在业务架构时确定，这主要是需要业务架构师去识别的，但是它的运维属性就应该由运维来识别了。

一个应用应该具备的基本运维属性：

1. **应用的元数据属性**，也就是简单直接地描述一个应用的信息，如应用名、应用 Owner、所属业务、是否核心链路应用以及应用功能说明等，这里的关键是应用名；
2. **应用代码属性**，主要是编程语言及版本（决定了后续的构建方式），GitLab 地址
3. **应用部署模式**，涉及到基础软件包，如语言包 Java、C++、Go 等；容器如 Tomcat、JBoss 等
4. **应用目录信息**，如运维脚本目录、日志目录、应用包目录、临时目录等
5. **应用运行脚本**，如启停脚本、健康监测脚本
6. **应用运行时的参数配置**，如运行端口、Java 的 JVM 参数 GC 方式、新生代、老生代、永生代的堆内存大小配置等

![https://docimg6.docs.qq.com/image/SXqUN_XY0clXh8AXk4xxnw.png?w=450&h=556](https://docimg6.docs.qq.com/image/SXqUN_XY0clXh8AXk4xxnw.png?w=450&h=556)

### 第三步，识别对象关系，

也就是应用与外部的关系，概括起来有三大类

1. **应用与基础设施的关系**，包括应用与资源、应用与 VIP、应用与 DNS 等等的关系
2. **平行层面的应用与应用之间的关系**，这里再细分下去就是应用服务或 API 与其它应用服务和 API 的依赖关系，如全链路这样的工具平台处理应用间关系管理
3. **应用与各类基础组件之间的关系**，比如应用与缓存，应用与消息、应用与 DB 等等之间的关系

### 第四步，识别应用的运维场景

这个就会比较多了，比如应用创建、持续集成、持续发布、扩容、缩容、监控等；

再复杂点的比如容量评估、压测、限流降级等。

聚焦到标准化的层面，通过基础设施和应用层面标准化的示例，可以掌握基本的建模思路，这样的思路可以应用到其它的运维对象上 。

通过上面这些内容，可以比较清晰地看到，我们的每一个运维操作都是针对某个运维对象的，这一点在规划运维体系时非常重要。

**而在这些对象中，应用又是重中之重，是微服务架构下的核心运维对象**

从应用标准化的过程中我们也可以看到，针对应用的识别和建模，明显复杂很多。